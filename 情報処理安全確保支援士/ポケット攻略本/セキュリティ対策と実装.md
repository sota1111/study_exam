# ファイアフォール
コンピュータのネットワークで、防波堤に該当する機器。
組織の内側と外側を繋ぐネットワークの結節点に設置し、不正な通信の侵入や流出を阻止する。

## 境界線モデル
セキュリティの基本は、自分の組織や敷地とそれ以外のところに線を引き、内と外に分けること。

## レイヤ３フィルタリング（IPアドレス使用）
ファイアウォールが通信の許可/拒否を行う判断を、レイヤ３の情報、すなわちIPアドレスを使って行うタイプ。フィルタリングに際しては、フィルタリングルール表（ルールベース）の作成が必要。

### 利点
負荷が少なく、高速で動作

### 弱点
判断根拠がIPアドレスであるため、通信の許可/拒否はノード単位。

### ICMP
Internet Control Message Protocol（ICMP）は、ネットワーク通信の問題を診断するためにネットワークデバイスが使用するネットワーク層のプロトコル。

## レイヤ４フィルタリング（＋ポート番号、プロトコル種別）
IPアドレスに加えて、レイヤ４、すなわちトランスポート層の情報も考慮して通信の可否を判断するタイプのファイヤーウォール。
TCPは可、UDPは不可、許可するポートを選定することができる。

###　利点
ソフトウェア単位の通信制御ができる。

### 返信はOK
TCPのヘッダにはACKフラグフィールドがあり、返信であることが分かり、返信の通信は許可する。これを**ダイナミックパケットフィルタリング**と言う。

## レイヤ７フィルタリング
アプリケーション層の情報をもとにして、フィルタリングを行うファイアウォール。特定のプロトコルに特化して、そのプロトコルで脆弱性になる要素をチェックできるので、きめ細かいフィルタリングが可能。ステートインスペクションに対応しているものが多いのも特徴。

### ステートフルインスペクション
パケット単体ではなく、その前後のパケットも含めて通信の可否を判断する方法。

####　利点と弱点
個々のプロトコル特性に応じて丁寧なフィルタリングできる。
多くのアプリケーションを運用していると導入・運用の負荷は増える。



# プロキシサーバ
元々はWebページの閲覧性の向上を目的に導入されるサーバで、プロキシ＝代理として、クライアントの代わりにWebサーバへアクセスを行う。

## プロキシサーバ
自社のクライアントが同じサーバへ何度も通信する場合、最初のアクセス時にコンテンツをプロキシサーバにキャッシュし、２度目からプロキシサーバが返信する。

### セキュリティ
- クライアントのIPアドレスがWebサーバに漏れない。
- 個々のクライアントPCに、設定漏れ、利用者が勝手に設定を書き換えていた、などの脆弱性があっても、プロキシサーバに通信を集約することで管理できる。

## シングルサインオン
複数のサーバにログインする必要がある時に、どこか１つにログインできれば後は自動的にログインできるようにする仕組み。

## リバースプロキシ
プロキシサーバを通常と逆に配置する方法。一般的なプロキシはクライアント側に配置して、クライアントの通信を集約する形になり、リバースプロキシはサーバ側に配置して、クライアント側から見ると、プロキシサーバに集まった通信を各サーバに振り分ける。

## SMAL認証
XMLベースのマークアップ言語であるSAMLを使って認証に関する情報（アサーション）をやり取りする仕組み。クッキーやリバースプロキシと異なり、異なるドメイン間でも運用できるのがポイントで、伝送プロトコルとしてはHTTPやSOAPが使われる。

### アサーション
- 属性ステートメント：ユーザの情報
- 認証ステートメント：認証を行ったサーバ
- 認可ステートメント：サブジェクトに何を許可したかの情報
サブジェクト：認証を受ける対象（ユーザやクライアントマシンなど）

サブジェクトは**アイデンティティプロバイダ**（**IdP**：認証サーバ）にアクセスし、認証される。
そこで発行された認証情報を**サービスプロバイダ**(**SP**：Webサーバなど)に送ればシングルサインオンが実現する。



# WAF
Webアプリに特化して通信のチェックを行う。

## WAFとは
Webアプリを守ることに特化したセキュリティ機器。
FWがL3~L4の情報を主に用いて通信の可否を決めるのに対して、WAFは運用するWebアプリが使うL7のデータを参照する。
特定のWebアプリの脆弱性を保護できる反面、他のアプリケーションや異なるレイヤの脅威には対応できない。

### 分類
 
#### ポジティブモデル
通信原則拒否。条件に一致する通信（ホワイトリスト）のみ例外的に許可。

#### ネガティブリスト
通信原則許可。条件に一致する通信（ブラックリスト）のみ例外的に拒否。

### フォールスポジティブ
正常アクセスを不正アクセスと誤判定する。

### フォールスネガティブ
不正アクセスを正常アクセスと誤判定する。